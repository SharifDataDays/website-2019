{# Aeonem:Zee #}

{% extends 'accounts/panel/panel.html' %}
{% load static i18n ai_filters tz %}
{% get_current_language_bidi as LANGUAGE_BIDI %}

{% block panel_content %}

<form enctype="multipart/form-data" action="{% url 'accounts:submit_trial' phase.id trial.id %}" class="form" method="post">
    {% csrf_token %}
    <div class="ui" style="width: 100%; display: block">
    <div class ="ui" style="border: 1px solid #E8E8E8; border-radius:.28571429rem .28571429rem 0 0; padding: 5%;">
        <div class="ui" style="border: 1px solid #E8E8E8; border-radius:.28571429rem .28571429rem 0 0; padding: 5%; margin-bottom: 5%; background-color: #e8e8e8; font-family: IRANSans;">
            بخش اول<br>
عنوان: پیش‌بینی برچسب<br>
امتیاز: ۱۰۰۰ امتیاز<br>
توانایی: تحلیل متن و ایجاد جستار مناسب روی دادگان<br>

مسئله: پیشبینی برند موبایل<br>
            <br>
توصیف: در این بخش شما یک دادگان ۱۰۰۰ ردیفی دانلود میکنید که مربوط به آگهی‌های تلفن همراه است. هدف از این بخش پیشبینی برند تلفن همراه ارائه شده در آگهی است. در انتها شما باید یک فایل به فرمت .txt آپلود کنید که در هر خط آن برند تلفن همراه ردیف متناظر در فایل است.

ملاحظه مهم: ساختار پاسخ باید دقیقا به شکل اشاره شده باشد. ضمنا هر برند باید به شکل ارائه شده در فایل پیوست به سوال نوشته شود.

        </div>
    {# File Based Questions #}
    <div style="margin:0 0 45px 0 ">
        {% for question in file_based_questions %}
            <div class="field"
                 style="margin:0 0 15px 0"
            >
                <div
                    class="ui top attached header"
                    style="
                        margin:0;
                        height: auto;
                        display: block;
                        word-wrap: break-word;
                        white-space: normal;
                        background-color: #e8e8e8;
                    "
                >
                     {{ question.stmt }}
                </div>
                <div class="ui attached"
                     style="
                        padding:0;
                        display: flex;

                        height: 10rem;
                        border-radius: 0 0 .28571429rem .28571429rem;
                        border:1px solid #d4d4d5;
                        border-top-color: transparent;
                        "
                >
                    <div
                        style="
                            width: 50%;
                            height: 100%;
                            display: flex;
                            flex-direction: column;
                            justify-content: center;
                            align-items: center;
                            border-left:1px solid #d4d4d5;
                            "
                    >
                        {# TODO href to download file #}
                        <a href="{% url 'accounts:get_dataset' phase.id trial.id %}" target="_blank" class="ui link">
                           <i class="download icon huge"></i>
                        </a>
                        {% trans 'Download Dataset' %}
                    </div>
                    <div
                        style="
                            width: 50%;
                            height: 100%;
                            display: flex;
                            flex-direction: column;
                            justify-content: center;
                            align-items: center;
                            "
                    >
                        <i class="upload icon huge"></i>
                        {% trans 'Upload Answer' %}
                        <input
                               type="file"
                               class="link"
                               name="{{ trial.id  }}_{{ question.id }}"
                               {# name="file" #}
                               accept="text/plain"
                        >
                    </div>
                </div>
            </div>
        {% endfor %}
        <p>{{error}}</p>

    </div>
    </div>

    <div class ="ui" style="border: 1px solid #E8E8E8; border-radius:.28571429rem .28571429rem 0 0; padding: 5%;">
    {# Multiple Choice Questions #}
    <div style="margin:0 0 45px 0 ">
        {% for question in choices %}
            <div class="field" style="margin:0 0 15px 0">
                <div class="ui top attached header" style="
                        margin:0;
                        height: auto;
                        display: block;
                        word-wrap: break-word;
                        white-space: normal;
                        background-color: #e8e8e8;
                    ">
                    {{ question.stmt }}
                </div>
                    <div>
                  <img class="grouped fields" style="margin-top: 10px">
                      {% for choice in question.choices %}
{#                           {% if choice.image.url %}#}
{#                               <img src={{ choice.image.url }}>#}
{#                           {% endif %}#}
                          <div class="field">
                              <div class="ui radio checkbox" style="margin-top: 10px">
                                  <input value="{{ choice.text }}" type="radio" name="{{ trial.id  }}_{{ question.id }}" id="{{ trial.id  }}_{{ question.id }}_{{ choice.id }}">
                                  {% if choice.image and choice.image.url %}
                                    <label for="{{ trial.id  }}_{{ question.id }}_{{ choice.id }}"><img src={{ choice.image.url }}></label>
                                  {% else %}
                                    <label for="{{ trial.id  }}_{{ question.id }}_{{ choice.id }}">{{ choice.text }}</label>
                                  {% endif %}
                              </div>
                          </div>
                      {% endfor %}
                  </div>
            </div>
        {% endfor %}
    </div>
    </div>

    <div class ="ui" style="border: 1px solid #E8E8E8; border-radius:.28571429rem .28571429rem 0 0; padding: 5%;">
    {# Numeric Single-Answer Questions #}
    <div style="margin:0 0 45px 0 ">
        {% for question in numeric_questions %}
            <div class="field" style="margin:0 0 15px 0">
                <div class="ui top attached header" style="
                                margin:0;
                                height: auto;
                                display: block;
                                word-wrap: break-word;
                                white-space: normal;
                                background-color: #e8e8e8;
                            ">
                     {{ question.stmt }}
                </div>
                <div class="ui attached input fluid" style="padding:0;">
                    <input
                       required
                       type="text"
                       step="0.00000000001"
                       name="{{ trial.id  }}_{{ question.id }}"
                       style="margin:0;
                                border-radius: 0 0 .28571429rem .28571429rem;
                                border:1px solid #d4d4d5;
                                border-top-color: transparent;
                              "
                       placeholder="{% trans 'No answer yet : Text field' %}"
                    >
                </div>
            </div>
        {% endfor %}
    </div>

    {# Text-Only Short-Answer Questions #}
    <div style="margin: 45px 0">
        {% for question in text_questions %}
            <div class="field"
                 style="margin:0 0 15px 0"
            >
                <div class="ui top attached header"
                            style="
                                margin:0;
                                height: auto;
                                display: block;
                                word-wrap: break-word;
                                white-space: normal;
                                background-color: #e8e8e8;
                            "
                >
                     {{ question.stmt }}
                </div>
                <div class="ui attached input fluid"
                     style="padding:0;"
                >
                    <input
                       required
                       type="text"
                       name="{{ trial.id  }}_{{ question.id }}"
                       style="margin:0;
                                border-radius: 0 0 .28571429rem .28571429rem;
                                border:1px solid #d4d4d5;
                                border-top-color: transparent;
                              "
                       placeholder="{% trans 'No answer yet : Text field' %}"
                    >
                </div>
            </div>
        {% endfor %}
    </div>

    {# Multiple Answer Questions #}
    <div style="margin:0 0 45px 0 ">
        {% for question in multiple %}
            <div class="field" style="margin:0 0 15px 0">
                <div class="ui top attached header" style="
                        margin:0;
                        height: auto;
                        display: block;
                        word-wrap: break-word;
                        white-space: normal;
                        background-color: #e8e8e8;
                    ">
                    {{ question.stmt }}
                </div>
                <div>
                    <div class="ui input fluid" style="padding:0;">
                        <input
                           required
                           type="text"
                           name="{{ trial.id  }}_{{ question.id }}_1"
                           style="margin:0;
                                    border-radius: 0 0 0 0;
                                    border:1px solid #d4d4d5;
                                    border-top-color: transparent;
                                  "
                           placeholder="{% trans 'No answer yet : Text field' %}"
                        >
                    </div>
                    <div class="ui input fluid" style="padding:0;">
                        <input
                           required
                           type="text"
                           name="{{ trial.id  }}_{{ question.id }}_2"
                           style="margin:0;
                                    border-radius: 0 0 0 0;
                                    border:1px solid #d4d4d5;
                                    border-top-color: transparent;
                                  "
                           placeholder="{% trans 'No answer yet : Text field' %}"
                        >
                    </div>
                    <div class="ui input fluid" style="padding:0;">
                        <input
                           required
                           type="text"
                           name="{{ trial.id  }}_{{ question.id }}_3"
                           style="margin:0;
                                    border-radius: 0 0 .28571429rem .28571429rem;
                                    border:1px solid #d4d4d5;
                                    border-top-color: transparent;
                                  "
                           placeholder="{% trans 'No answer yet : Text field' %}"
                        >
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
    </div>
    {# Submit Button#}
    <button
        class="fluid ui submit blue button"
        style="margin: 20px 0"
        type="submit"
    >
        {% trans 'Submit' %}
    </button>

    </div>
</form>
<script>
$( ".ui.radio.checkbox" ).checkbox();
</script>
{% endblock %}
